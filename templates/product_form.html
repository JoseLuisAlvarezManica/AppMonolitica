<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if modo == 'nuevo' %}Nuevo Producto{% else %}Editar Producto{% endif %} - Sistema de Productos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/products.css') }}">
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <div class="logo">Sistema de Productos</div>
            <ul class="nav-links">
                <li><a href="{{ url_for('productos.productos_get') }}">Lista de Productos</a></li>
                <li><a href="{{ url_for('productos.productos_nuevo') }}">Nuevo Producto</a></li>
                <li><a href="{{ url_for('auth.logout') }}">Cerrar Sesi√≥n</a></li>
            </ul>
        </nav>

        <div class="content">
            <div class="section">
                <h2 class="section-title">
                    {% if modo == 'nuevo' %}
                        Nuevo Producto
                    {% else %}
                        Editar Producto
                    {% endif %}
                </h2>
                
                {% if error %}
                <div class="alert alert-error" style="background-color: #fee; border: 1px solid #fcc; color: #c66; padding: 10px; margin-bottom: 20px; border-radius: 4px;">
                    {{ error }}
                </div>
                {% endif %}
                
                <div class="form-container">
                    <form method="POST" action="{% if modo == 'nuevo' %}{{ url_for('productos.productos_nuevo') }}{% else %}{{ url_for('productos.productos_editar', id=producto[0]) }}{% endif %}">
                        <div class="form-group">
                            <label for="nombre">Nombre del Producto:</label>
                            <input type="text" id="nombre" name="nombre" 
                                   value="{% if modo == 'editar' %}{{ producto[1] }}{% endif %}" 
                                   required>
                        </div>

                        <div class="form-group">
                            <label for="precio">Precio:</label>
                            <input type="number" id="precio" name="precio" step="0.01" min="0"
                                   value="{% if modo == 'editar' %}{{ producto[2] }}{% endif %}" 
                                   required>
                        </div>

                        <div class="form-group">
                            <label for="stock">Stock:</label>
                            <input type="number" id="stock" name="stock" min="0"
                                   value="{% if modo == 'editar' %}{{ producto[3] }}{% endif %}" 
                                   required>
                        </div>

                        <div class="form-group">
                            <label for="categoria">Categoria:</label>
                            <input type="text" id="categoria" name="categoria" min="0"
                                   value="{% if modo == 'editar' %}{{ producto[5] }}{% endif %}" 
                                   required>
                        </div>

                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="activo" name="activo" 
                                       {% if modo == 'nuevo' or (modo == 'editar' and producto[4] == 1) %}checked{% endif %}>
                                <label for="activo">Producto Activo</label>
                            </div>
                        </div>

                        <div style="margin-top: 30px;">
                            <button type="submit" class="btn btn-success">
                                {% if modo == 'nuevo' %}
                                    Crear Producto
                                {% else %}
                                    Actualizar Producto
                                {% endif %}
                            </button>
                            <a href="{{ url_for('productos.productos_get') }}" class="btn">
                                Volver a Lista
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>